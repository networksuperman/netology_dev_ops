## Домашнее задание к занятию "Regexp и его использование для синтаксического анализа"  

### Задание 1.  
Напишите регулярное выражение для проверки является ли строка IPv4 адресом.  
Для тестов можно использовать файл со следующим содержимым, фильтруя вывод с помощью команды grep -E:  
192.168.0.1  
127.0.0.1  
84.345.23.11  
88.3A.56.76  
224.12.76  
Пришлите получившееся выражение в качестве ответа.  

#### Ответ:   
^(\d|[1-9][0-9]|1\d\d|2[0-5][0-5])\.(\d{1}|[1-9][0-9]|1\d\d|2[0-5][0-5])\.(\d{1}|[1-9][0-9]|1\d\d|2[0-5][0-5])\.(\d{1}|[1-9][0-9]|1\d\d|2[0-5][0-5])$


### Задание 2.    
В Вашей конфигурации Nginx скопилось много неиспользуемых сегментов и становится сложно его читать.  
Используя sed удалите все пустые строки и комментарии в конфигурации Nginx.  
Попробуйте сделать это одним запуском.  
Файл расположен по ссылке  
Пришлите получившуюся команду в качестве ответа  

#### Ответ:   
sed -i.bk '/^#.*\|^\n\| *#\|^$/d' nginx.conf

### Задание 3.  
Используя awk и ps aux соберите информацию о:  
количестве процессов для каждого пользователя;  
ps --no-headers aux | awk '{pscount[$1] += 1} END{ for (user in pscount) {print user, pscount[user]}}' | sort -k2nr  
![]()

процессе с самым большим PID;  
ps aux --no-headers | awk 'BEGIN {a=0} {if ($2>a) a=$2} END {print a}'  
![]()

(дополнительное задание со звездочкой*)
суммарном использовании памяти различными пользователями. 
for _user in $(ps haux | awk '{print $1}' | sort -u); do ps haux | awk -v user=${_user} '{if ($1 == user) { sum += $4}} END { print user, sum"%"; }'; done  
![]()

Пришлите скриншоты со скриптами и демонстрацией их работы  

#### Ответ:   


Дополнительные задания (со звездочкой*)  

### Задание 4.  
Напишите bash-скрипт который собирает информацию о системе и пишет ее в лог каждые 5 секунд.  
Используемые параметры:  
loadavg[1,5,15] средний показатель загрузки ЦПУ за последние 1 5 и 15 минут. Примечание: хранится в /proc/loadavg.  
memfree количество свободной оперативной памяти в байтах. Примечание: используем утилиту free.  
memtotal количество всей оперативной памяти в байтах. Примечание: используем утилиту free.  
diskfree свободное место на диске подключенного к /. Примечание: используем утилиту df.    
disktotal общий объем диска подключенного к /. Примечание: используем утилиту df.  
Формат записи: timestamp loadavg1 loadavg5 loadavg15 memfree memtotal diskfree disktotal  
Пособирайте данные в течении 5-10 минут.  
Анализируя этот лог с помощью awk напишите скрипт проверки состояния системы с заданными условиями:  
loadavg1 < 1 в течении последних 2 минут;  
memfree / memtotal < 60% в течении последних 3 минут;  
diskfree / disktotal < 60% в течении последних 5 минут.  
Скрипт должен возвращать 0 код ответа, если все условия выполняются, и любой другой в случае невыполнения.  
В консоль также необходимо выводить, какое именно из условий не выполняется.  
Пришлите получившиеся скрипты в качестве ответа.  

#### Ответ:   
