## Домашнее задание к занятию "Дисковые системы"  

### Задание 1  
Какие виды RAID увеличивают производительность дисковой системы?  
Приведите ответ в свободной форме.  

#### Ответ:  
- RAID 0 за счет поочередной записи на каждый диск, что существенно увеличивает производительность операций чтения и записи. Главный минус - выход из строя любого диска ведет к потере данных всей RAID-группы.  
- RAID 10 так как он обладает самой высокой производительностью и надежностью. Главный минус - эффективность использования дискового пространства составляет 50%.  

### Задание 2  
Влияет ли количество операций ввода-вывода на параметр load average?  
Приведите развернутый ответ в свободной форме.  

#### Ответ:  
Влияет, так как при отсутствии высокой загрузки процессора, мы можем ожидать данные от диска, то есть какие-то процессы ожидают окончания операций ввода-вывода. Но в то же время то, что часть процессов ждут жесткий диск и процессор работает вхолостую, не говорит о том, что система находится в простое, наоборот, она не может обработать нагрузку, правда по другой, не зависящей от процессора причине.   

Допустим, 100 процессов обратились к базе данных (например, MySQL), база ответила "я сейчас" и ушла на диск 100 раз и в разные места. Диск не может определить что считать раньше потому читает частички из случайных мест, а в итоге, все стоят ждут. Фактически, в этот момент процессор не занят, ожидая появления флага «Дисковая операция завершилась».  

Соответственно ысокий LA может быть вызван не только загрузкой cpu, но также и нагрузкой на диски или сеть.  

Еще как пример можно привести аналогию с машинами, то есть LA показывает, сколько машин едут, или стоят в ожидании ресурсов.  
Ресурсы — это не столько CPU, сколько I/O.  
Чаще всего это жесткий или сеть.  
И как писал выше ри хорошей нагрузке легко получить высокий LA при "проблемах" дисковой или сетевой подсистемы (как аппаратных, так и программных).  
На мой взгляд — при обычных задачах современный процессор редко становится причиной роста LA.  

### Задание 3  
Подключите к виртуальной машине 2 новых диска.  
1)На первом диске создайте таблицу разделов MBR, Создайте 4 раздела: первый раздел на 50% диска, остальные любого размера на ваше усмотрение. Хотя бы один из разделов должен быть логическим.  
2)На втором диске создайте таблицу разделов GPT. Создайте 4 раздела: первый раздел на 50% диска, остальные любого размера на ваше усмотрение.  
В качестве ответа приложите скриншоты, на которых было бы видно разметку диска(например, командами lsblk -a; fdisk -l)  

#### Ответ:  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/SLINA-19/IT%20System%20and%20OS%20Linux/img/2-06-3-1.jpg)  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/SLINA-19/IT%20System%20and%20OS%20Linux/img/2-06-3-2.jpg)  

### Дополнительные задания (со звездочкой*)  

### Задание 4  
Создайте программный RAID 1 в вашей ОС используя программу mdadm.  
Демонстрация работы утилиты была на лекции. Объем RAID неважен.  
В качестве ответа приложите скриншот вывода команды mdadm -D /dev/md0, где md0 - это название вашего рейд массива(может быть любым).  

#### Ответ:  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/SLINA-19/IT%20System%20and%20OS%20Linux/img/2-06-4-1.jpg)  

 
### Задание 5  
Сделайте скриншоты вывода комманд df -h, pvs, lvs, vgs;  
подключите к ОС 2 новых диска;  
создайте новую VG, добавьте в него 1 диск;  
создайте 2 LV, распределите доступное пространство между ними поровну;  
создайте на обоих томах файловую систему xfs;  
создайте две точки монтирования и смонтируйте каждый из томов;  
сделайте скриншот вывода комманд df -h;  
добавьте в VG второй оставшийся диск;  
расширьте первый LV на объем нового диска;  
расширьте файловую систему на размер нового доступного пространства;  
сделайте скриншоты вывода комманд df -h, pvs, lvs, vgs.  
В качестве ответа приложите созданные скриншоты и скриншоты выполнения.  

#### Ответ:  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/SLINA-19/IT%20System%20and%20OS%20Linux/img/2-06-5-1.jpg)  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/SLINA-19/IT%20System%20and%20OS%20Linux/img/2-06-5-2.jpg)  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/SLINA-19/IT%20System%20and%20OS%20Linux/img/2-06-5-3.jpg)  

По поводу скриншотов выполнения, если нужно проверить ход выполнения, с Вашего позволения приложу команды:  
sudo vgcreate vol_grp1 /dev/sde  
sudo vgdisplay  
sudo lvcreate -L 2.5G -n logical_vol1 vol_grp1  
sudo lvdisplay  
sudo lvcreate -L 2.5G -n logical_vol2 vol_grp1  
sudo lvcreate -l 639 -n logical_vol2 vol_grp1  
sudo lvdisplay  
sudo mkfs.xfs /dev/vol_grp1/logical_vol1  
sudo mkfs.xfs /dev/vol_grp1/logical_vol2  
sudo mkdir /mnt/logical_vol1  
sudo mkdir /mnt/logical_vol2  
sudo mount /dev/vol_grp1/logical_vol1 /mnt/logical_vol1  
sudo mount /dev/vol_grp1/logical_vol2 /mnt/logical_vol2  
df -h  
sudo pvcreate /dev/sdd  
sudo pvscan  
sudo pvdisplay  
sudo umount /dev/mapper/vol_grp1-logical_vol1  
df -h  
sudo lvextend -l +1279 /dev/vol_grp1/logical_vol1 /dev/sdd  
df -h  
sudo vgdisplay  
sudo mount /dev/vol_grp1/logical_vol1 /mnt/logical_vol1  
sudo xfs_growfs /dev/vol_grp1/logical_vol1  
sudo df -h  
sudo pvs  
sudo lvs  
sudo vgs  

