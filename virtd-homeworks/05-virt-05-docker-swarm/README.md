## Домашнее задание к занятию 5. «Оркестрация кластером Docker контейнеров на примере Docker Swarm»  

### Задача 1  
Дайте письменые ответы на вопросы:  
В чём отличие режимов работы сервисов в Docker Swarm-кластере: replication и global?  
Какой алгоритм выбора лидера используется в Docker Swarm-кластере?  
Что такое Overlay Network?  

#### Ответ:  
- Для replication мы явно указываем количество реплик сервиса, которые хотим запустить. В режиме global запускается одна реплика на каждом узле, заранее заданного количества реплик нет.  
- В Docker Swarm кластере используется так называемый алгоритм поддержания распределенного консенсуса — Raft. Выбор лидера происходит следующим образом: если ноды-фолловеры не слышат лидера, они переходят в статус кандидата, кандидат на лидера отправляет остальным нодам запрос на голосование и, большинством голосов, выбирается лидером.  
- Overlay network - это внутренняя виртуальная сеть кластера docker swarm, которая упрощает взаимодействие узлов кластера между собой.  

### Задача 2  
Создайте ваш первый Docker Swarm-кластер в Яндекс Облаке.  
Чтобы получить зачёт, предоставьте скриншот из терминала (консоли) с выводом команды:  
docker node ls  

#### Ответ:  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/virtd-homeworks/05-virt-05-docker-swarm/img/2.1.jpg)  

### Задача 3  
Создайте ваш первый, готовый к боевой эксплуатации кластер мониторинга, состоящий из стека микросервисов.  
Чтобы получить зачёт, предоставьте скриншот из терминала (консоли), с выводом команды:  
docker service ls  

#### Ответ:  
![](https://github.com/networksuperman/netology_dev_ops/blob/main/virtd-homeworks/05-virt-05-docker-swarm/img/3.1.jpg)  

### Задача 4 (*)  
Выполните на лидере Docker Swarm-кластера команду, указанную ниже, и дайте письменное описание её функционала — что она делает и зачем нужна:  
см.документацию: https://docs.docker.com/engine/swarm/swarm_manager_locking/  
docker swarm update --autolock=true  

#### Ответ:  
Насколько я понял из документации. Docker swarm шифрует логи raft и трафик между нодами и когда docker перезапускается он автоматически загружает эту информацию. Команда docker swarm update --autolock=true позволяет блокировать функцию загрузки при запуске/перезапуске docker и в этом случае, для загрузки docker, будет необходимо разблокировать docker при помощи команды docker swarm unlock и ключа предоставленного во время выполнения команды docker swarm update --autolock=true
