## Домашнее задание к занятию 3 «Резервное копирование»  

### Задание 1  
Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию /tmp/backup  
Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)  
Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.  
На проверку направить скриншот с командой и результатом ее выполнения  

#### Ответ: 
```
rsync -av --delete --exclude '.*' --checksum ~/ /tmp/backup/
```
![](https://github.com/networksuperman/netology_dev_ops/blob/main/fault_tolerance/10_3/img/10_3_1.jpg)
---

### Задание 2  
Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.  
Резервная копия должна быть полностью зеркальной  
Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции  
Резервная копия размещается локально, в директории /tmp/backup  
На проверку направить файл crontab и скриншот с результатом работы утилиты.  

#### Ответ:  
```
#!/bin/bash
# Путь к исходной директории для резервного копирования
source_dir="/home/sysadmin

# Путь к директории, в которую будет сохранена резервная копия
backup_dir="/tmp/backup"

# Выполнение команды rsync для создания зеркальной копии
rsync -av --delete --checksum "$source_dir" "$backup_dir" > /var/log/backup.log 2>&1

# Проверка успешности выполнения команды rsync
if [ $? -eq 0 ]; then
    echo "$(date): Резервное копирование успешно завершено" >> /var/log/backup.log
else
    echo "$(date): Ошибка при выполнении резервного копирования" >> /var/log/backup.log
fi

```
